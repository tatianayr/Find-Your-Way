<!doctype html>
<html lang="pt-br">

<head>
	<title> Projeto Web </title>
	<meta charset="utf-8">
	<meta name="author" content="Tatiana">
	<meta name="description" content="criação de uma web app">
	<meta name="keywords" content="html5, tecnologia">
	<link rel="stylesheet" href="stylesheets/form.css">
	<script src="javascripts/script_maps1.js"></script>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="javascripts/requests/questionario.js"></script>
	<script  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkLXt8NqoaAz8doyQQHrqMwyJXwy-o-rk&callback=initMap"> </script>
	

</head>

<body>

	
	<nav class="header-nav">
		
		<ul>
			<li><a href="index.html"> Home </a></li>
			<li><a href="about.html"> About us </a> </li>
			<li><a href="features.html"> Features </a> </li>
			<li><a href="contacts.html"> Contacts </a> </li>
			<li><a href="form.html"> Questionnaire </a> </li>
			<li><a href="login.html"> Sign In</a> </li>
			<li><a href="register.html"> Sign Up</a> </li>
		</ul>

	</nav>


	<section>
		<form id="myForm">
			<div class="question" id="page1">
				<h1>Question 1</h1>
				<h2>At what season would you like to make your trip?</h2>
				<div id="q1">
					<input type="radio" name="season" value="1">Spring<br>
					<input type="radio" name="season" value="2">Summer<br>
					<input type="radio" name="season" value="3">Autumn<br>
					<input type="radio" name="season" value="4">Winter<br><br>
				</div>
				<input type="button" value="Next" onclick="nextPage()" id="nextButton">

			</div>


			<div class="question" id="page2">
				<h1>Question 2</h1>
				<h2>which historic architecture draws more attention?</h2>
				<div id="q2">
				</div>
				<input type="button" value="Previous" onclick="prevPage()" id="prevButton">
				<input type="button" value="Next" onclick="nextPage()" id="nextButton">

			</div>
			<div class="question" id="page3">
				<h1>Question 3</h1>
				<h2>Which of these interests would you like to experience on your trip?</h2>
				<div id="q3">
				</div>
				<input type="button" value="Previous" onclick="prevPage()" id="prevButton">
				<input type="button" value="Next" onclick="nextPage()" id="nextButton">
			</div>

			<div class="question" id="page4">
				<h1>Question 4</h1>
				<h2>Would you rather visit a city:</h2>
				<div id="q4"></div>
				<div id="cityList"></div>
				
				<input type="button" value="Previous" onclick="prevPage()" id="prevButton">
				<input type="submit" value="Submit" id="subButton" onclick="showCities(); return false;">
			  </div>

			  <div id="mapContainer">
				<div id="map" style="height: 20em;"></div>
			  </div>

		</form>
	</section>


	<script>
		
		var currentQuestion = 1;
		var questionPages = document.querySelectorAll(".question");
		var season = 1;
		var histories = 1;
		var activity =1;
		var cost=1;
		var number=1;

		

		async function nextPage() {
			if (currentQuestion == 1) {
				let questions = document.getElementById("q1");
				questions.childNodes.forEach(element => {
					if (element.checked) season = element.value;
				});
				await question2();
			}
			
			else if (currentQuestion == 2) {
				let questions = document.getElementById("q2");
				questions.childNodes.forEach(element => {
					if (element.checked) histories = element.value;
				});
				await question3();
			}
			else if (currentQuestion == 3) {
				let questions = document.getElementById("q3");
				questions.childNodes.forEach(element => {
					if (element.checked) activity = element.value;
				});
				await question4();
			}
			
			if (currentQuestion < questionPages.length) {
				questionPages[currentQuestion - 1].style.display = "none";
				currentQuestion++;
				questionPages[currentQuestion - 1].style.display = "block";
			}
		}
		

		function prevPage() {
			if (currentQuestion > 1) {
				questionPages[currentQuestion - 1].style.display = "none";
				currentQuestion--;
				questionPages[currentQuestion - 1].style.display = "block";
			}
		}
	</script>
	<script>
		async function checkLoginStatus() {
			try {
				const response = await fetch('/api/users/auth');
				if (response.status === 200) {
					return;
				} else {
					window.location.href = 'login.html';
				}
			} catch (err) {
				console.log(err);
			}
		}
			document.addEventListener('DOMContentLoaded', function () {
			checkLoginStatus();
		});
		</script>
</body>

</html>